{% comment %}
  Renders a media element for the product gallery.
  Media types include: image, video, external_video and model.
  Accepts:
  - media: {Object} Media Liquid object (required)
  - featured_media: {Object} Media Liquid object (required) - featured media of a given product or variant
{% endcomment %}

{%- liquid
  assign is_featured = false
  if featured_media == media
    assign is_featured = true
  endif

  assign has_video = false
  assign video_type = ''
  assign video_modal = false

  assign image_set = false
  assign image_set_group = ''
  if media.alt contains '#'
    assign image_set_full = media.alt | split: '#' | last
    if image_set_full contains '_'
      assign image_set = true
      assign image_set_group = image_set_full | split: '_' | first
    endif
  endif

  if force_jpg
    assign img_url = media | img_url: '1x1', format: 'jpg' | replace: '_1x1.', '_{width}x.'
    assign zoom_img_url = media.preview_image | img_url: product_zoom_size, format: 'jpg'
  else
    assign img_url = media | img_url: '1x1' | replace: '_1x1.', '_{width}x.'
    assign zoom_img_url = media.preview_image | img_url: product_zoom_size
  endif

  case media.media_type
    when 'external_video'
      assign has_video = true
      assign video_type = media.host
      if media.host contains 'youtube'
        assign video_id = media.external_id
      endif
    when 'video'
      assign has_video = true
      assign video_type = 'mp4'
  endcase

  if has_video and video_style == 'unmuted'
    assign video_modal = true
  endif

  assign media_aspect_ratio = media.aspect_ratio
  assign media_width = media.width
  assign media_height = media.height

  if media.media_type != 'image'
    assign media_width = media.preview_image.width
    assign media_height = media.preview_image.height
  endif

  if has_video and video_style == 'unmuted'
    assign media_aspect_ratio = media.preview_image.aspect_ratio
  endif

  if media.media_type == 'model' and media.preview_image.aspect_ratio
    assign media_aspect_ratio = media.preview_image.aspect_ratio
  endif
-%}












<div
  class="swiper-slide{% if is_featured %} starting-slide{% else %} secondary-slide{% endif %}"
  data-product-photo
  data-index="{{ loopIndex0 }}"
  data-id="{{ media.id }}"
  {%if image_set%}
    data-set-name="{{image_set_group}}"
    data-group="{{image_set_full}}"
  {%endif%}>

  <div class="product-image-main">
    <div
      class="image-wrap"
      style="height: 0; padding-bottom: {{ 100 | divided_by: media_aspect_ratio }}%;"
      {% if media.media_type == 'model' %}data-product-media-type-model data-media-id="{{ section_id }}-{{ media.id }}"{% endif %}
      >
      <img
          class="lazyload{% if product_zoom_enable %} photoswipe__image{% endif %}{% if has_video and video_modal == false %} hide{% endif %}"
          data-photoswipe-src="{{ zoom_img_url }}"
          data-photoswipe-width="{{ media_width }}"
          data-photoswipe-height="{{ media_height }}"
          data-index="{{ loopIndex }}"
          data-src="{{ img_url }}"
          data-widths="[750, 900, 1080]"
          data-aspectratio="{{ media_aspect_ratio }}"
          data-sizes="auto"
          alt="{{ media.alt | escape | split: '#' | first }}">
      <noscript>
        <img
          class="lazyloaded"
          src="{{ media | img_url: product_image_size }}" alt="{{ media.alt | escape | split: '#' | first }}">
      </noscript>

      {%- if product_zoom_enable and media.media_type == 'image' -%}
        <button type="button" class="btn btn--tertiary btn--circle js-photoswipe__zoom product__photo-zoom" data-index="{{ loopIndex }}">
          <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-search" viewBox="0 0 64 64"><path d="M47.16 28.58A18.58 18.58 0 1 1 28.58 10a18.58 18.58 0 0 1 18.58 18.58zM54 54L41.94 42"/></svg>
          <span class="icon__fallback-text">{{ 'general.accessibility.close_modal' | t }}</span>
        </button>
      {%- endif -%}

      {%- if media.media_type == 'model' -%}
        {{ media | model_viewer_tag: image_size: product_zoom_size, reveal: 'interaction', toggleable: true, data-model-id: media.id }}
        <button class="hide btn btn--circle product-single__close-media">
          <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-close" viewBox="0 0 64 64"><path d="M19 17.61l27.12 27.13m0-27.12L19 44.74"/></svg>
        </button>
      {%- else -%}
        {%- if has_video and video_modal -%}
          {%- if video_type == 'youtube' -%}
            <a href="https://youtube.com/watch?v={{ media.external_id }}" class="btn btn--circle btn--large product-video-trigger">
              <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-play" viewBox="18.24 17.35 24.52 28.3"><path fill="#323232" d="M22.1 19.151v25.5l20.4-13.489-20.4-12.011z"/></svg>
            </a>
          {%- endif -%}
          {%- if video_type == 'mp4' -%}
            <button type="button" class="btn btn--circle btn--large product-video-trigger product-video-trigger--mp4">
              <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-play" viewBox="18.24 17.35 24.52 28.3"><path fill="#323232" d="M22.1 19.151v25.5l20.4-13.489-20.4-12.011z"/></svg>
            </button>

            {% comment %}
              Hidden video element that gets placed in the video modal
            {% endcomment %}
            <video
              playsinline
              {% if video_looping %}loop{% endif %}
              controls
              controlsList="nodownload"
              poster="{{ media.preview_image | img_url: product_image_size }}"
              class="hide product-video-mp4-sound">
              {%- for source in media.sources -%}
                <source src="{{ source.url }}" type="{{ source.mime_type }}">
              {%- endfor -%}
              Your browser does not support the video tag.
            </video>
          {%- endif -%}
        {%- endif -%}

        {%- if has_video -%}
          {%- unless video_modal -%}
            <div
              data-video-type="{{ video_type }}"
              class="product__video-wrapper{% if video_type == 'youtube' %} loading{% endif %}"
              data-video-style="{{ video_style }}"
              style="padding-bottom: {{ 100 | divided_by: media.aspect_ratio }}%;">
              {%- if video_type == 'youtube' -%}
                <div
                  id="ProductVideo-{{ section_id }}-{{ loopIndex }}"
                  class="product__video"
                  data-product-video
                  data-image-count="{{ product.media.size }}"
                  data-video-type="{{ video_type }}"
                  data-video-style="{{ video_style }}"
                  data-video-loop="{{ video_looping }}"
                  data-youtube-id="{{ video_id }}">
                </div>
              {%- endif -%}
              {%- if video_type == 'mp4' -%}
                <video
                  playsinline
                  {% if video_looping %}loop{% endif %}
                  {% if video_style == 'muted' %}muted{% endif %}
                  {% if video_style == 'unmuted' %}controls{% endif %}
                  controlsList="nodownload"
                  poster="{{ media.preview_image | img_url: product_image_size }}"
                  data-product-video
                  data-image-count="{{ product.media.size }}"
                  data-video-type="{{ video_type }}"
                  data-video-style="{{ video_style }}"
                  id="ProductVideo-{{ section_id }}-{{ loopIndex }}"
                  class="product__video">
                  {%- for source in media.sources -%}
                    {%- if isModal -%}
                      <div class="hide product__video-src" src="{{ source.url }}" type="{{ source.mime_type }}"></div>
                    {%- else -%}
                      <source src="{{ source.url }}" type="{{ source.mime_type }}">
                    {%- endif -%}
                  {%- endfor -%}
                  Your browser does not support the video tag.
                </video>
              {%- endif -%}
            </div>
          {%- endunless -%}
        {%- endif -%}
      {%- endif -%}
    </div>
  </div>
</div>


            <div class="swiper-slide lozad">
              <div class="container-hero-top _30-percent">
                <div class="benefits-blocks">
                  <div class="w-layout-grid grid-14">
                    <div id="w-node-_4780e485-29b3-3e63-3a2f-94d7d6a94d2e-a8f389e4" class="hero-ico-container"><img src="images/icon-01.svg" loading="lazy" alt="" class="image-25">
                      <p class="ico-container-text">~60MG OF <br>CAFFEINE PER TSP.<br></p>
                    </div>
                    <div id="w-node-_4780e485-29b3-3e63-3a2f-94d7d6a94d35-a8f389e4" class="hero-ico-container"><img src="images/icon-02.svg" loading="lazy" alt="" class="image-25">
                      <p class="ico-container-text">1-2 TSP. OF JAVY PER 6OZ COFFEE<br></p>
                    </div>
                    <div id="w-node-_4780e485-29b3-3e63-3a2f-94d7d6a94d3a-a8f389e4" class="hero-ico-container"><img src="images/icon-03.svg" loading="lazy" alt="" class="image-25">
                      <p class="ico-container-text">IF YOU CAN THINK, YOU CAN MAKE IT<br></p>
                    </div>
                  </div>
                  <div class="div-block-281">
                    <div class="text-block-37">MADE WITH THE FINEST ARABICA COFFEE BEANS</div>
                  </div>
                </div>
              </div>
              <div class="container-hero _65-percent">
                <div class="rotator-deal-2">
                  <div class="tag-text-4-2">MAKES<br><span class="text-span-41">30</span><br>CUPS</div><img src="images/circular_rotator.svg" loading="lazy" alt="" class="image-24">
                </div>
              </div><img src="images/new-imgs_0002_Layer-4.jpg" alt="Javy Iced Coffee" loading="lazy" class="hero-image swiper-lazy">
              <div class="swiper-lazy-preloader"></div>
            </div>
            <div class="swiper-slide lozad">
              <div class="container-hero-top-type">
                <p class="any-type">Craft Any Type Of Coffee <br>You Want!</p>
              </div>
              <div class="container-coffee-type-60">
                <div class="inner-hero">
                  <div class="w-layout-grid grid-15">
                    <div class="icon-div-one-2">
                      <div class="iconbox"><img src="images/americano-new_v02.svg" loading="lazy" alt=""></div>
                      <div class="icontextbox">
                        <div class="icon-text-2">Americano</div>
                        <p class="paragraph-5">6oz of hot water + 1 tsp of Javy<br></p>
                      </div>
                    </div>
                    <div class="icon-div-one-2">
                      <div class="iconbox"><img src="images/ice-coffee-new_v02.svg" loading="lazy" alt=""></div>
                      <div class="icontextbox">
                        <div class="icon-text-2">Iced Coffee</div>
                        <p class="paragraph-5">8 oz of water + 1-2 tsp of Javy<br></p>
                      </div>
                    </div>
                    <div class="icon-div-one-2">
                      <div class="iconbox"><img src="images/affogato-new_v02.svg" loading="lazy" alt=""></div>
                      <div class="icontextbox">
                        <div class="icon-text-2">Affogato</div>
                        <p class="paragraph-5">Gelato + 1 tsp of Javy<br></p>
                      </div>
                    </div>
                    <div class="icon-div-one-2">
                      <div class="iconbox"><img src="images/latte-new_v02.svg" loading="lazy" alt=""></div>
                      <div class="icontextbox">
                        <div class="icon-text-2">Latte</div>
                        <p class="paragraph-5">6oz of steamed milk <br>+ 1-2 tsp of Javy<br></p>
                      </div>
                    </div>
                  </div>
                </div>
              </div><img src="images/new-imgs_0004_Layer-2.jpg" alt="Javy Iced Coffee" loading="lazy" class="hero-image swiper-lazy">
              <div class="swiper-lazy-preloader"></div>
            </div>
            <div class="swiper-slide lozad">
              <div class="ingredients-section">
                <div class="nutrition-full-width">
                  <div class="nutrition-inside">
                    <div class="size-hero">serving size, 1 tsp</div>
                    <div class="top-col-hero">
                      <div class="servings">
                        <div class="top-caf-hero">amount per serving<br></div>
                        <div class="table-caf-text">caffeine (mg)<br></div>
                      </div>
                      <div class="table-caf-number">60<br></div>
                    </div>
                    <div class="nutrition-daily">
                      <div>% daily value*<br></div>
                    </div>
                    <div class="nutrition-hero">
                      <div>calories 0g<br></div>
                      <div class="nutrition-percentage">0%<br></div>
                    </div>
                    <div class="nutrition-hero">
                      <div>fat 0g<br></div>
                      <div class="nutrition-percentage">0%<br></div>
                    </div>
                    <div class="nutrition-hero">
                      <div>sodium 0g<br></div>
                      <div class="nutrition-percentage">0%<br></div>
                    </div>
                    <div class="nutrition-hero">
                      <div>protein 0g<br></div>
                      <div class="nutrition-percentage">0%<br></div>
                    </div>
                  </div>
                </div>
              </div><img src="images/new-imgs_0000_Layer-6.jpg" alt="Javy and a Delicious Iced Coffee" class="hero-image swiper-lazy">
              <div class="swiper-lazy-preloader"></div>
            </div>
